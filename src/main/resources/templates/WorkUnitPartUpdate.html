<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Thymeleaf Form handling Demo</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
</head>
<body class="container">

<h1> Add parts to work unit </h1>

<div th:object="${workUnit}">
    <h2> Selected work unit </h2>
    <th> ID: </th> <th th:text="${workUnit.id}"></th><br/>
    <th> Type: </th> <th th:text="${workUnit.type}"></th><br/>
    <th> Car: </th> <th th:text="${workUnit.car.licencePlate}"></th><br/>
    <th> Mechanic: </th> <th th:text="${workUnit.mechanic}"></th><br/>
    <th> Customer Status: </th> <th th:text="${workUnit.customerStatus}"></th><br/>
    <th> Repair Status: </th> <th th:text="${workUnit.repairStatus}"></th><br/>
    <br>
</div>

    <form action="#"
          th:action="@{/workUnitParts/addWorkUnitPart/{id}(id=${workUnit.id})}"
          th:object="${workUnitPart}"
          method="post">

        <h2> Add parts </h2>

        <input hidden type="text" th:value="${workUnit.id}" id="workUnitId" name="workUnitId" />

        <div class="form-group">
            <select id="partId" name="partId">
                <option th:each="part : ${listOfParts}" th:value="${part.id}" th:text="${part.name}"></option>
            </select>
        </div>

        <div class="form-group">
            <label for="amount">Amount</label>
            <input id="amount" placeholder="amount" type="number" th:field="*{amount}"
                   class="form-control"/>
        </div>

        <input type="submit" class="btn btn-primary" value="Update">

    </form>

    <table class="table table-striped table-bordered">
        <tr>
            <th> WorkUnit </th>
            <th> Part </th>
            <th> Amount </th>
        </tr>
        <tr th:if="${#lists.isEmpty(listOfWorkUnitParts)}">
            <td colspan="5"> No parts added </td>
        </tr>
        <tr th:each="workUnitPart : ${listOfWorkUnitParts}">
            <td th:text="${workUnitPart.workUnit.id}"></td>
            <td th:text="${workUnitPart.part.name}"></td>
            <td th:text="${workUnitPart.amount}"></td>
        </tr>
    </table>

    <br>
    <br>
    <a href="/workUnit/"> Back to work units list </a>
    <br>
    <a href="/home">Back to home page</a>
    <br>
    <br>

</body>
</html>