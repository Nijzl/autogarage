<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>InvoiceForm</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css">
</head>
<body>
<div>

    <h1> Generate Invoice </h1>

    <h2> Selected work unit </h2>
    <th> ID: </th> <th th:text="${workUnit.id}"></th><br/>
    <th> Type: </th> <th th:text="${workUnit.type}"></th><br/>
    <th> Car: </th> <th th:text="${workUnit.car.licencePlate}"></th><br/>
    <th> Mechanic: </th> <th th:text="${workUnit.mechanic}"></th><br/>
    <th> Customer Status: </th> <th th:text="${workUnit.customerStatus}"></th><br/>
    <th> Repair Status: </th> <th th:text="${workUnit.repairStatus}"></th><br/>
    <br>

    <form action="#" th:action="@{/invoices/create/{id}(id=${workUnit.id})}" method="post" th:object="${invoice}">

        <table class="table table-striped table-bordered">
            <tr>
                <th> Part </th>
                <th> Amount </th>
                <th> Price </th>
                <th> Total </th>
            </tr>
            <tr th:if="${#lists.isEmpty(listOfWorkUnitParts)}">
                <td colspan="5"> No parts added </td>
            </tr>
            <tr th:each="workUnitPart : ${listOfWorkUnitParts}">
               <td th:text="${workUnitPart.part.name}"></td>
                <td th:text="${workUnitPart.amount}"></td>
                <td th:text="${workUnitPart.part.price}">?</td>
                <td th:text="${workUnitPart.getTotalPartCost()}">
                </td>
            </tr>
        </table>

        <table class="table table-striped table-bordered">
            <tr>
                <th> Action </th>
<!--                <th> Description </th>-->
                <th> Amount </th>
                <th> Price </th>
                <th> Total </th>
            </tr>
            <tr th:if="${#lists.isEmpty(listOfWorkUnitActions)}">
                <td colspan="5"> No actions added </td>
            </tr>
            <tr th:each="workUnitAction : ${listOfWorkUnitActions}">
                <td th:text="${workUnitAction.action.name}"></td>
<!--                <td th:text="${workUnitAction.action.description}"></td>-->
                <td th:text="${workUnitAction.amount}"></td>
                <td th:text="${workUnitAction.action.price}">?</td>
                <td th:text="${workUnitAction.getTotalActionCost()}">
                </td>
            </tr>
        </table>

        <input hidden type="text" th:value="${workUnit.id}" id="workUnit" name="workUnit"/>

        <!--<label> Payment Status </label>-->
        <select hidden id="paymentStatus" name="paymentStatus">
            <option th:value="OPEN" selected="OPEN"> Open </option>
            <option th:value="PAID"> Paid </option>
        </select>
        <br>

        <br>
        <br>
        <button type="submit">Register</button>
        <br>

        <br>
        <br>
        <a href="/workUnit/"> Back to work units list </a>
        <br>
        <br>
        <a href="/home"> Back to home page </a>

    </form>
</div>
</body>
</html>